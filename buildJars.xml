<?xml version="1.0"?>
<project name="JSonPojo Jars" default="runBuildJars" basedir=".">

    <target name="runBuildJars" depends="chkProps, fail" unless="missingProp">
        <echo message="Build jars..."/>
        <antcall target="allJars" />
    </target>

    <target name="chkProps">
        <property name="chk0" value="$${classes}"/>
        <property name="chk1" value="$${jars_dest}"/>
        <condition property="missingProp">
            <or>
                <equals arg1="${chk0}" arg2="${classes}"/>
                <equals arg1="" arg2="${classes}"/>
                <equals arg1="${chk1}" arg2="${jars_dest}"/>
                <equals arg1="" arg2="${jars_dest}"/>
            </or>
        </condition>
    </target>
    
    <target name="fail" if="missingProp">
        <fail message="missing property(ies) : classes, jars_dest"/>
    </target>

	<property name="project" value="JSonPojo"/>	
	<property name="pkg_base" value="aka"/>	

    <property name="target.managers" value="${jars_dest}"/>
    <property name="target.applications" value="${jars_dest}"/>

    <target name="clean">
        <delete dir="${jars_dest}" />
    </target>
    
    <target name="allJars" depends="jar"/>

    <target name="jar">
        <echo message="Building : JSonPojo" />
        
        <tstamp>
            <format property="TODAY_UK" pattern="yyyy-MM-dd HH:mm" locale="en,UK"/>
        </tstamp>
        
    	<jar jarfile="${target.applications}/${project}-${version}.jar" basedir="${classes}"
    	             includes="${pkg_base}/**/" 
    	             excludes="**/test/**">
            <manifest>
                <attribute name="version" value="${version}" />
                <attribute name="time" value="${TODAY_UK}" />
            </manifest>
        </jar>
    </target>
    
</project>
